<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head.ejs') %>

  <body>

    <%- include('./partials/nav.ejs') %>

      <div class="details content">
        <h2><%= blog.title %></h2>
        <div>
          <p>#<%= blog.snippet %></p>
          <p class="details-text"><%= blog.body %></p>
        </div>
        <div class="btn-group">
          <a href='/blogs/edit/<%= blog._id %>' class="btn edit" data-doc='<%= blog._id %>'>Edit</a>
          <form class="btn delete"  action="<%= blog._id%>?_method=DELETE" method='POST'>
            <button>Delete</button>
          </form>
          <!-- <a class="btn delete" data-doc='<%= blog._id %>'>Delete</a> -->
        </div>
        
      </div>
      <%- include('./partials/footer.ejs') %>
<!-- 
      <script>
        const deleteBtn = document.querySelector('a.delete');
        deleteBtn.addEventListener('click', (e) => {
          const endpoint = `/blogs/${deleteBtn.dataset.doc}`

          fetch(endpoint, {
            method: 'DELETE'
          })
            .then((response) => response.json())
            .then((data) =>  window.location.href = data.redirect)
            .catch((err) => console.log(err))
        })
      </script> -->
  </body>

</html>